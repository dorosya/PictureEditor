<Window x:Class="PictureEditor.WPF.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Фоторедактор" Height="700" Width="1000"
        WindowStartupLocation="CenterScreen">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Меню -->
        <Menu Grid.Row="0" Background="LightGray">
            <MenuItem Header="Файл">
                <MenuItem Header="Открыть фото" Click="OpenButton_Click"/>
                <MenuItem Header="Сохранить" Click="SaveButton_Click"/>
                <Separator/>
                <MenuItem Header="Выход" Click="ExitButton_Click"/>
            </MenuItem>
            <MenuItem Header="Правка">
                <MenuItem Header="Яркость" Click="BrightnessButton_Click"/>
                <MenuItem Header="Цветовой фильтр" Click="ColorFilterButton_Click"/>
                <MenuItem Header="Обрезать" Click="CropButton_Click"/>
                <MenuItem Header="Добавить текст" Click="TextButton_Click"/>
                <MenuItem Header="Повернуть" Click="RotateButton_Click"/>
            </MenuItem>
        </Menu>

        <!-- Основное содержимое -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Список фото -->
            <Border Grid.Column="0" BorderBrush="Gray" BorderThickness="0,0,1,0">
                <StackPanel>
                    <TextBlock Text="Фотографии" 
                               FontWeight="Bold" 
                               Margin="10,5"
                               HorizontalAlignment="Center"/>

                    <ListBox x:Name="PhotosListBox" 
                             Margin="10"
                             Height="300"
                             SelectionChanged="PhotosListBox_SelectionChanged">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="{Binding BitmapImage}" 
                                           Width="40" Height="40" 
                                           Margin="0,0,5,0"/>
                                    <TextBlock Text="{Binding Name}" 
                                               VerticalAlignment="Center"/>
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>

                    <Button x:Name="AddPhotoButton" 
                            Content="Добавить фото" 
                            Margin="10,5" 
                            Click="AddPhotoButton_Click"/>
                    <Button x:Name="RemovePhotoButton" 
                            Content="Удалить" 
                            Margin="10,5"
                            Click="RemovePhotoButton_Click"/>
                </StackPanel>
            </Border>

            <!-- Область предпросмотра -->
            <Border Grid.Column="1" Margin="10">
                <Grid>
                    <Image x:Name="PreviewImage" 
                           Stretch="Uniform"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           MouseLeftButtonDown="PreviewImage_MouseLeftButtonDown"
                           MouseMove="PreviewImage_MouseMove"
                           MouseLeftButtonUp="PreviewImage_MouseLeftButtonUp"/>

                    <!-- Оверлей для выделения (обрезка) -->
                    <Canvas x:Name="OverlayCanvas" IsHitTestVisible="False">
                        <Rectangle x:Name="SelectionRect"
                                   Stroke="DodgerBlue"
                                   StrokeThickness="2"
                                   Fill="#4000A0FF"
                                   Visibility="Collapsed"/>
                    </Canvas>

                    <TextBlock x:Name="NoImageText" 
                               Text="Выберите или добавьте фото"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               FontSize="16"
                               Foreground="Gray"/>
                </Grid>
            </Border>
        </Grid>

        <!-- Панель инструментов -->
        <Border Grid.Row="2" BorderBrush="Gray" BorderThickness="0,1,0,0" Padding="10">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Button x:Name="BrightnessBtn" Content="Яркость" Width="80" Margin="5" Click="BrightnessButton_Click"/>
                <Button x:Name="ColorBtn" Content="Цвет" Width="80" Margin="5" Click="ColorFilterButton_Click"/>
                <Button x:Name="CropBtn" Content="Обрезать" Width="80" Margin="5" Click="CropButton_Click"/>
                <Button x:Name="TextBtn" Content="Текст" Width="80" Margin="5" Click="TextButton_Click"/>
                <Button x:Name="RotateBtn" Content="Повернуть" Width="80" Margin="5" Click="RotateButton_Click"/>
                <Button x:Name="PixelBtn" Content="Пиксель" Width="80" Margin="5" Click="PixelButton_Click"/>
                <Button x:Name="CollageBtn" Content="Коллаж" Width="80" Margin="5" Click="CollageButton_Click"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>